{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\n// import { DomSanitizer } from '@angular/platform-browser';\nexport let HomeComponent = class HomeComponent {\n  constructor(service, fb, router, sanitizer) {\n    this.service = service;\n    this.fb = fb;\n    this.router = router;\n    this.sanitizer = sanitizer;\n    this.extypeData = [];\n    this.selectedExType = '';\n    this.inputExAmount = '';\n    this.inctypeData = [];\n    this.selectedIncType = '';\n    this.incAmount = 0;\n    this.exData = [];\n    this.extypeSingleData = [];\n    this.expenseForm = this.fb.group({\n      inputExtypeID: [''],\n      inputExAmount: ['']\n    });\n    this.expenseEditForm = this.fb.group({\n      inputEditExtypeID: [''],\n      inputEditExAmount: ['']\n    });\n  }\n  ngOnInit() {\n    this.service.getAllExType().subscribe(response => {\n      this.extypeData = response.data;\n    });\n    this.service.getAllIncType().subscribe(response => {\n      this.inctypeData = response.data;\n    });\n    this.service.getAllEx().subscribe(response => {\n      this.exData = response.data;\n    });\n  }\n  getExtypeName(extypeID) {\n    const extype = this.extypeData.find(item => item.extypeID === extypeID);\n    return extype ? extype.extypeName : '';\n  }\n  addExData() {\n    const extypeID = this.expenseForm.value.inputExtypeID;\n    const exAmount = this.expenseForm.value.inputExAmount;\n    this.service.createEx(extypeID, exAmount).subscribe(() => {\n      this.expenseForm.reset();\n      window.location.reload();\n    });\n  }\n  deleteAllExpenses() {\n    Swal.fire({\n      title: 'ต้องการลบรายการรายจ่ายทั้งหมด ?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'แน่นอน',\n      cancelButtonText: 'ยกเลิก'\n    }).then(result => {\n      if (result.isConfirmed) {\n        // Delete all expenses\n        this.service.deleteAllEx().subscribe(() => {\n          window.location.reload();\n        });\n      }\n    });\n  }\n  deleteSingleExpenses(i) {\n    Swal.fire({\n      title: 'ต้องการลบรายจ่ายแถวนี้ ?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'แน่นอน',\n      cancelButtonText: 'ยกเลิก'\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.service.deleteEx(this.exData[i].exID).subscribe(() => {\n          this.exData.splice(i, 1);\n        });\n      }\n    });\n  }\n  editSingleExpenses(i) {\n    const exData = this.exData[i];\n    const html = `\n      <div class=\"grid grid-cols-4 place-items-center bg-orange-400 rounded-t text-stone-800 text-xl font-medium\">\n        <div class=\"bg-white py-1 w-full h-full\"></div>\n        <h3>ชนิด</h3>\n        <h3>ราคา</h3>\n        <h3>ราคา</h3>\n      </div>\n      <div class=\"grid grid-cols-4 place-items-center bg-stone-800 text-white overflow-hidden\">\n        <div class=\"w-full h-full bg-red-400 py-1\">\n          <p>เก่า</p>\n        </div>\n        <p>${this.getExtypeName(exData.extypeID)}</p>\n        <p>${exData.exAmount}</p>\n        <p>${exData.exDate}</p>\n      </div>\n      <div class=\"mt-16\">\n        <form class=\"grid grid-cols-[40%_40%] gap-4 w-full place-content-center\" [formGroup]=\"expenseEditForm\">\n          <select formControlName=\"inputEditExtypeID\" name=\"extype\" class=\"px-2 rounded bg-stone-800 text-white\" id=\"extype\">\n            <option value=\"\" disabled selected>-- ชนิด --</option>\n          </select>\n          <div class=\"relative w-full\">\n            <span class=\"absolute ml-2 left-0 h-full flex justify-center items-center text-orange-400\">฿</span>\n            <input formControlName=\"inputEditExAmount\" class=\"w-full h-full py-1 pl-6 rounded focus:outline-none bg-stone-800 text-white\" placeholder=\"1000.00\"/>\n          </div>\n        </form>\n      </div>\n    `;\n    const sanitizedHtml = this.sanitizer.bypassSecurityTrustHtml(html);\n    Swal.fire({\n      title: `แก้ไขรายการรายจ่าย`,\n      html: sanitizedHtml,\n      confirmButtonColor: 'rgb(251 146 60)',\n      confirmButtonText: 'บันทึก',\n      preConfirm: () => {\n        const extypeIDEdit = this.expenseEditForm.value.inputEditExtypeID;\n        const exAmountEdit = this.expenseEditForm.value.inputEditExAmount;\n        const exID = this.exData[i].exID;\n        console.log(extypeIDEdit);\n        console.log(exAmountEdit);\n        console.log(exID);\n        this.service.updateEx(extypeIDEdit, exAmountEdit, exID).subscribe(() => {\n          console.log('successfully');\n        });\n      }\n    });\n    const select = document.querySelector('#extype');\n    if (select) {\n      this.extypeData.forEach(item => {\n        const option = document.createElement('option');\n        option.value = item.extypeID;\n        option.text = item.extypeName;\n        select.appendChild(option);\n      });\n    }\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);","map":{"version":3,"names":["Component","Swal","HomeComponent","constructor","service","fb","router","sanitizer","extypeData","selectedExType","inputExAmount","inctypeData","selectedIncType","incAmount","exData","extypeSingleData","expenseForm","group","inputExtypeID","expenseEditForm","inputEditExtypeID","inputEditExAmount","ngOnInit","getAllExType","subscribe","response","data","getAllIncType","getAllEx","getExtypeName","extypeID","extype","find","item","extypeName","addExData","value","exAmount","createEx","reset","window","location","reload","deleteAllExpenses","fire","title","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","deleteAllEx","deleteSingleExpenses","i","deleteEx","exID","splice","editSingleExpenses","html","exDate","sanitizedHtml","bypassSecurityTrustHtml","confirmButtonColor","preConfirm","extypeIDEdit","exAmountEdit","console","log","updateEx","select","document","querySelector","forEach","option","createElement","text","appendChild","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Software projects\\Project\\ANGULAR\\aboutMoney-angular\\frontend\\src\\app\\pages\\home\\home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ApiserviceService } from 'src/app/apiservice.service';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport { Router } from '@angular/router';\n// import { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  extypeData: any[] = [];\n  selectedExType: string = '';\n  inputExAmount: string = '';\n\n  inctypeData: any[] = [];\n  selectedIncType: string = '';\n  incAmount: number = 0;\n\n  exData: any[] = [];\n  extypeSingleData: any[] = [];\n\n  expenseForm: FormGroup;\n  expenseEditForm: FormGroup;\n  select: any;\n\n  constructor(\n    private service: ApiserviceService,\n    private fb: FormBuilder,\n    private router: Router,\n    private sanitizer: DomSanitizer,\n  ) {\n    this.expenseForm = this.fb.group({\n      inputExtypeID: [''],\n      inputExAmount: ['']\n    })\n\n    this.expenseEditForm = this.fb.group({\n      inputEditExtypeID: [''],\n      inputEditExAmount: ['']\n    })\n  }\n\n  ngOnInit(): void {\n    this.service.getAllExType().subscribe(response => {\n      this.extypeData = response.data;\n    })\n    this.service.getAllIncType().subscribe(response => {\n      this.inctypeData = response.data;\n    })\n\n    this.service.getAllEx().subscribe(response => {\n      this.exData = response.data;\n    })\n\n  }\n\n  getExtypeName(extypeID: number): string {\n    const extype = this.extypeData.find(item => item.extypeID === extypeID);\n    return extype ? extype.extypeName : '';\n  }\n\n  addExData() {\n    const extypeID = this.expenseForm.value.inputExtypeID;\n    const exAmount = this.expenseForm.value.inputExAmount;\n\n    this.service.createEx(extypeID, exAmount).subscribe(() => {\n      this.expenseForm.reset();\n      window.location.reload();\n    })\n  }\n\n  deleteAllExpenses() {\n    Swal.fire({\n      title: 'ต้องการลบรายการรายจ่ายทั้งหมด ?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'แน่นอน',\n      cancelButtonText: 'ยกเลิก',\n    }).then((result) => {\n      if (result.isConfirmed) {\n        // Delete all expenses\n        this.service.deleteAllEx().subscribe(() => {\n          window.location.reload();\n        });\n      }\n    });\n  }\n\n  deleteSingleExpenses(i: number) {\n    Swal.fire({\n      title: 'ต้องการลบรายจ่ายแถวนี้ ?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'แน่นอน',\n      cancelButtonText: 'ยกเลิก',\n    }).then((result) => {\n      if (result.isConfirmed) {\n        this.service.deleteEx(this.exData[i].exID).subscribe(() => {\n          this.exData.splice(i, 1);\n        });\n      }\n    });\n  }\n\n  editSingleExpenses(i: number) {\n    const exData = this.exData[i];\n\n    const html = `\n      <div class=\"grid grid-cols-4 place-items-center bg-orange-400 rounded-t text-stone-800 text-xl font-medium\">\n        <div class=\"bg-white py-1 w-full h-full\"></div>\n        <h3>ชนิด</h3>\n        <h3>ราคา</h3>\n        <h3>ราคา</h3>\n      </div>\n      <div class=\"grid grid-cols-4 place-items-center bg-stone-800 text-white overflow-hidden\">\n        <div class=\"w-full h-full bg-red-400 py-1\">\n          <p>เก่า</p>\n        </div>\n        <p>${this.getExtypeName(exData.extypeID)}</p>\n        <p>${exData.exAmount}</p>\n        <p>${exData.exDate}</p>\n      </div>\n      <div class=\"mt-16\">\n        <form class=\"grid grid-cols-[40%_40%] gap-4 w-full place-content-center\" [formGroup]=\"expenseEditForm\">\n          <select formControlName=\"inputEditExtypeID\" name=\"extype\" class=\"px-2 rounded bg-stone-800 text-white\" id=\"extype\">\n            <option value=\"\" disabled selected>-- ชนิด --</option>\n          </select>\n          <div class=\"relative w-full\">\n            <span class=\"absolute ml-2 left-0 h-full flex justify-center items-center text-orange-400\">฿</span>\n            <input formControlName=\"inputEditExAmount\" class=\"w-full h-full py-1 pl-6 rounded focus:outline-none bg-stone-800 text-white\" placeholder=\"1000.00\"/>\n          </div>\n        </form>\n      </div>\n    `;\n\n    const sanitizedHtml = this.sanitizer.bypassSecurityTrustHtml(html);\n\n    Swal.fire({\n      title: `แก้ไขรายการรายจ่าย`,\n      html: sanitizedHtml,\n      confirmButtonColor: 'rgb(251 146 60)',\n      confirmButtonText: 'บันทึก',\n      preConfirm: () => {\n        const extypeIDEdit = this.expenseEditForm.value.inputEditExtypeID;\n        const exAmountEdit = this.expenseEditForm.value.inputEditExAmount;\n        const exID = this.exData[i].exID;\n\n        console.log(extypeIDEdit)\n        console.log(exAmountEdit)\n        console.log(exID)\n        this.service.updateEx(extypeIDEdit, exAmountEdit, exID).subscribe(() => {\n          console.log('successfully')\n        })\n      }\n    })\n\n    const select = document.querySelector('#extype') as HTMLSelectElement;\n\n    if (select) {\n      this.extypeData.forEach((item) => {\n        const option = document.createElement('option');\n        option.value = item.extypeID;\n        option.text = item.extypeName;\n        select.appendChild(option);\n\n      })\n    }\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}